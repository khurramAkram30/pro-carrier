import { DefaultVoidImplementation } from '../../src';
import { describe, expect, test } from '@jest/globals';

describe('Default void implementation tests', function () {
    test('Is void request id mapped based on request data. Expected 00000123', () => {
        const result = new DefaultVoidImplementation({
            transaction_id: '',
            void_requests: [
                {
                    ship_from: {
                        postal_code: '',
                        country_code: ''
                    },
                    void_request_id: '00000123'
                }
            ]
        });

        const expectedValue: DefaultVoidImplementation = {
            void_responses: [
                {
                    void_request_id: '00000123'
                }
            ]
        };

        expect(JSON.stringify(result)).toStrictEqual(JSON.stringify(expectedValue));
    });

    test('Is void request id mapped based on request data. A few id are provided. Expected 00000123 and 5555555', () => {
        const result = new DefaultVoidImplementation({
            transaction_id: '',
            void_requests: [
                {
                    ship_from: {
                        postal_code: '',
                        country_code: ''
                    },
                    void_request_id: '00000123'
                },
                {
                    ship_from: {
                        postal_code: '',
                        country_code: ''
                    },
                    void_request_id: '5555555'
                }
            ]
        });

        const expectedValue: DefaultVoidImplementation = {
            void_responses: [
                { void_request_id: '00000123' },
                { void_request_id: '5555555' }
            ]
        };

        expect(JSON.stringify(result)).toStrictEqual(JSON.stringify(expectedValue));
    });
});
